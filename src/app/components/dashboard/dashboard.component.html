// dashboard.component.html
<div class="dashboard-container" *ngIf="!loading">
  <!-- Header del Dashboard -->
  <div class="dashboard-header">
    <div class="welcome-section">
      <div class="user-avatar-large">
       {{ getInitials() }}
        /div>
      <div class="welcome-text">
        <h1>Â¡Bienvenido, {{ getFullName() }}!</h1>
        <p>
         {{ getRoleIcon(userRole) }} {{ getRoleDisplayName(userRole) }}
          <span *ngIf="currentUser?.institucion" class="institution-badge">
          â€¢ {{ currentUser?.institucion?.nombre }}
          </span>
        </p>
      </div>
    </div>
    <div class="dashboard-stats">
      <div class="stat-card">
        <div class="stat-icon">ğŸ“Š</div>
        <div class="stat-info">
          <span class="stat-number">{{ currentUser?.rol === 'admin_global' ? 'Todas' : 'Mi' }}</span>
          <span class="stat-label">InstituciÃ³n(es)</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Acciones RÃ¡pidas por Rol -->
  <div class="quick-actions">
    <h2>ğŸš€ Acciones RÃ¡pidas</h2>
    
    <!-- Admin Global -->
    <div class="actions-grid" *ngIf="isAdminGlobal()">
      <div class="action-card primary" (click)="navigateToInstituciones()">
        <div class="action-icon">ğŸ¢</div>
        <h3>Gestionar Instituciones</h3>
        <p>Crear, editar y administrar todas las instituciones del sistema</p>
        <div class="action-button">Ver Instituciones</div>
      </div>

      <div class="action-card secondary" (click)="navigateToUsuarios()">
        <div class="action-icon">ğŸ‘¥</div>
        <h3>Gestionar Usuarios</h3>
        <p>Administrar todos los usuarios y sus permisos en el sistema</p>
        <div class="action-button">Ver Usuarios</div>
      </div>

      <div class="action-card tertiary" (click)="navigateToRifas()">
        <div class="action-icon">ğŸ²</div>
        <h3>Ver Todas las Rifas</h3>
        <p>Monitor global de todas las rifas activas del sistema</p>
        <div class="action-button">Ver Rifas</div>
      </div>

      <div class="action-card accent" (click)="navigateToReportes()">
        <div class="action-icon">ğŸ“ˆ</div>
        <h3>Reportes Globales</h3>
        <p>EstadÃ­sticas y anÃ¡lisis completos del sistema</p>
        <div class="action-button">Ver Reportes</div>
      </div>
    </div>

    <!-- Admin InstituciÃ³n -->
    <div class="actions-grid" *ngIf="isAdminInstitucion()">
      <div class="action-card primary" (click)="navigateToRifas()">
        <div class="action-icon">ğŸ²</div>
        <h3>Crear Nueva Rifa</h3>
        <p>Configurar una nueva rifa para tu instituciÃ³n</p>
        <div class="action-button">Nueva Rifa</div>
      </div>

      <div class="action-card secondary" (click)="navigateToRifas()">
        <div class="action-icon">ğŸ“‹</div>
        <h3>Mis Rifas</h3>
        <p>Gestionar las rifas activas de tu instituciÃ³n</p>
        <div class="action-button">Ver Rifas</div>
      </div>

      <div class="action-card tertiary" (click)="navigateToUsuarios()">
        <div class="action-icon">ğŸ‘¥</div>
        <h3>Gestionar Vendedores</h3>
        <p>Administrar el equipo de vendedores de tu instituciÃ³n</p>
        <div class="action-button">Ver Vendedores</div>
      </div>

      <div class="action-card accent" (click)="navigateToReportes()">
        <div class="action-icon">ğŸ“Š</div>
        <h3>Reportes InstituciÃ³n</h3>
        <p>EstadÃ­sticas y ventas de tu instituciÃ³n</p>
        <div class="action-button">Ver Reportes</div>
      </div>
    </div>

    <!-- Vendedor -->
    <div class="actions-grid" *ngIf="currentUser?.rol === 'vendedor'">
      <div class="action-card primary" (click)="navigateToVentas()">
        <div class="action-icon">ğŸ’°</div>
        <h3>Vender NÃºmeros</h3>
        <p>Procesar ventas de nÃºmeros de rifas disponibles</p>
        <div class="action-button">Iniciar Venta</div>
      </div>

      <div class="action-card secondary" (click)="navigateToRifas()">
        <div class="action-icon">ğŸ²</div>
        <h3>Rifas Disponibles</h3>
        <p>Ver rifas activas disponibles para la venta</p>
        <div class="action-button">Ver Rifas</div>
      </div>

      <div class="action-card tertiary" (click)="navigateToVentas()">
        <div class="action-icon">ğŸ“‹</div>
        <h3>Mis Ventas</h3>
        <p>Historial y estadÃ­sticas de tus ventas realizadas</p>
        <div class="action-button">Ver Ventas</div>
      </div>

      <div class="action-card accent" (click)="navigateToReportes()">
        <div class="action-icon">ğŸ“Š</div>
        <h3>Mi Rendimiento</h3>
        <p>Comisiones y estadÃ­sticas de vendedor</p>
        <div class="action-button">Ver EstadÃ­sticas</div>
      </div>
    </div>

    <!-- Comprador -->
    <div class="actions-grid" *ngIf="currentUser?.rol === 'comprador'">
      <div class="action-card primary" (click)="navigateToRifas()">
        <div class="action-icon">ğŸ›’</div>
        <h3>Comprar NÃºmeros</h3>
        <p>Explorar rifas disponibles y comprar nÃºmeros</p>
        <div class="action-button">Explorar Rifas</div>
      </div>

      <div class="action-card secondary" (click)="navigateToCompras()">
        <div class="action-icon">ğŸ«</div>
        <h3>Mis NÃºmeros</h3>
        <p>Ver todos los nÃºmeros que has comprado</p>
        <div class="action-button">Ver NÃºmeros</div>
      </div>

      <div class="action-card tertiary" (click)="navigateToCompras()">
        <div class="action-icon">ğŸ†</div>
        <h3>Resultados</h3>
        <p>Verificar resultados de sorteos realizados</p>
        <div class="action-button">Ver Resultados</div>
      </div>

      <div class="action-card accent" (click)="navigateToCompras()">
        <div class="action-icon">ğŸ“Š</div>
        <h3>Mi Historial</h3>
        <p>Historial completo de compras y participaciones</p>
        <div class="action-button">Ver Historial</div>
      </div>
    </div>
  </div>

  <!-- SecciÃ³n de EstadÃ­sticas RÃ¡pidas -->
  <div class="stats-section">
    <h2>ğŸ“ˆ EstadÃ­sticas RÃ¡pidas</h2>
    
    <div class="stats-grid">
      <!-- Stats para Admin Global -->
      <ng-container *ngIf="isAdminGlobal()">
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ¢</span>
            <span class="stat-title">Instituciones</span>
          </div>
          <div class="stat-value">{{ '12' }}</div>
          <div class="stat-change positive">+2 este mes</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ‘¥</span>
            <span class="stat-title">Usuarios Totales</span>
          </div>
          <div class="stat-value">{{ '847' }}</div>
          <div class="stat-change positive">+15 esta semana</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ²</span>
            <span class="stat-title">Rifas Activas</span>
          </div>
          <div class="stat-value">{{ '23' }}</div>
          <div class="stat-change neutral">3 finalizan pronto</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ’°</span>
            <span class="stat-title">Ingresos Totales</span>
          </div>
          <div class="stat-value">${{ '125,430' }}</div>
          <div class="stat-change positive">+8.5% vs mes anterior</div>
        </div>
      </ng-container>

      <!-- Stats para Admin InstituciÃ³n -->
      <ng-container *ngIf="isAdminInstitucion()">
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ²</span>
            <span class="stat-title">Mis Rifas</span>
          </div>
          <div class="stat-value">{{ '5' }}</div>
          <div class="stat-change positive">2 activas</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ‘¥</span>
            <span class="stat-title">Vendedores</span>
          </div>
          <div class="stat-value">{{ '8' }}</div>
          <div class="stat-change positive">6 activos</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ«</span>
            <span class="stat-title">NÃºmeros Vendidos</span>
          </div>
          <div class="stat-value">{{ '1,234' }}</div>
          <div class="stat-change positive">+12% esta semana</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ’°</span>
            <span class="stat-title">Ingresos</span>
          </div>
          <div class="stat-value">${{ '15,680' }}</div>
          <div class="stat-change positive">+5.2% vs mes anterior</div>
        </div>
      </ng-container>

      <!-- Stats para Vendedor -->
      <ng-container *ngIf="currentUser?.rol === 'vendedor'">
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ«</span>
            <span class="stat-title">NÃºmeros Vendidos</span>
          </div>
          <div class="stat-value">{{ '156' }}</div>
          <div class="stat-change positive">+23 esta semana</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ’°</span>
            <span class="stat-title">Comisiones</span>
          </div>
          <div class="stat-value">${{ '1,840' }}</div>
          <div class="stat-change positive">+8.5% vs mes anterior</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ†</span>
            <span class="stat-title">Ranking</span>
          </div>
          <div class="stat-value">#{{ '3' }}</div>
          <div class="stat-change positive">â†‘1 posiciÃ³n</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ¯</span>
            <span class="stat-title">Meta Mensual</span>
          </div>
          <div class="stat-value">{{ '78%' }}</div>
          <div class="stat-change positive">En buen camino</div>
        </div>
      </ng-container>

      <!-- Stats para Comprador -->
      <ng-container *ngIf="currentUser?.rol === 'comprador'">
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ«</span>
            <span class="stat-title">NÃºmeros Comprados</span>
          </div>
          <div class="stat-value">{{ '23' }}</div>
          <div class="stat-change neutral">En 8 rifas</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ’°</span>
            <span class="stat-title">Total Invertido</span>
          </div>
          <div class="stat-value">${{ '345' }}</div>
          <div class="stat-change neutral">Este aÃ±o</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ†</span>
            <span class="stat-title">Premios Ganados</span>
          </div>
          <div class="stat-value">{{ '2' }}</div>
          <div class="stat-change positive">Â¡Felicitaciones!</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-icon">ğŸ²</span>
            <span class="stat-title">Rifas Activas</span>
          </div>
          <div class="stat-value">{{ '5' }}</div>
          <div class="stat-change neutral">Participando</div>
        </div>
      </ng-container>
    </div>
  </div>

  <!-- SecciÃ³n de Actividades Recientes -->
  <div class="recent-activity">
    <h2>ğŸ“‹ Actividad Reciente</h2>
    
    <div class="activity-list">
      <!-- Actividades segÃºn el rol -->
      <div class="activity-item" *ngIf="isAdminGlobal()">
        <div class="activity-icon">ğŸ¢</div>
        <div class="activity-content">
          <span class="activity-text">Nueva instituciÃ³n "Colegio San JosÃ©" registrada</span>
          <span class="activity-time">Hace 2 horas</span>
        </div>
      </div>
      
      <div class="activity-item" *ngIf="isAdminInstitucion()">
        <div class="activity-icon">ğŸ²</div>
        <div class="activity-content">
          <span class="activity-text">Rifa "Sorteo NavideÃ±o" creada exitosamente</span>
          <span class="activity-time">Hace 1 dÃ­a</span>
        </div>
      </div>
      
      <div class="activity-item" *ngIf="currentUser?.rol === 'vendedor'">
        <div class="activity-icon">ğŸ’°</div>
        <div class="activity-content">
          <span class="activity-text">15 nÃºmeros vendidos en "Rifa BenÃ©fica"</span>
          <span class="activity-time">Hace 3 horas</span>
        </div>
      </div>
      
      <div class="activity-item" *ngIf="currentUser?.rol === 'comprador'">
        <div class="activity-icon">ğŸ«</div>
        <div class="activity-content">
          <span class="activity-text">Comprado nÃºmero 147 en "Sorteo NavideÃ±o"</span>
          <span class="activity-time">Hace 1 dÃ­a</span>
        </div>
      </div>
      
      <div class="activity-item">
        <div class="activity-icon">ğŸ””</div>
        <div class="activity-content">
          <span class="activity-text">Sistema actualizado con nuevas funcionalidades</span>
          <span class="activity-time">Hace 3 dÃ­as</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div class="loading-container" *ngIf="loading">
  <div class="loading-spinner"></div>
  <p>Cargando dashboard...</p>
</div>
